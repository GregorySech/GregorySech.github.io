<!DOCTYPE html>
<html lang="en"  class="theme--light" >

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://gregorysech.github.io/images/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://gregorysech.github.io/images/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://gregorysech.github.io/images/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://gregorysech.github.io/images/apple-touch-icon-57x57.png" />
  <link rel="short icon" href="https://gregorysech.github.io/images/favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://gregorysech.github.io/style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" rel="stylesheet">
  <title>Gregory Sech • TIL 2024-03-11: Tesseract OCR output formats</title>
  
  
  
</head>

<body>
  <div id="sidebar" class="animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src=https://gregorysech.github.io/images/logo@2x.png style="width:127px;" alt="logo" />
        <h3><a href="https://gregorysech.github.io/">Gregory Sech</a></h3>
        <div class="description">
          <p>Likes problems and solutions.</p>
        </div>
      </div>
    </div>
    <ul class="social-links"><li><a href="https://github.com/GregorySech" aria-label="Go to Github profile page"><i class="fab fa-github"></i></a></li><li><a href="https://gitlab.com/GregorySech" aria-label="Go to Gitlab profile page"><i class="fab fa-gitlab"></i></a></li><li><a href="https://www.instagram.com/gregorysech" aria-label="Go to Instagram profile page"><i class="fab fa-instagram"></i></a>
      </li><li><a href="https://linkedin.com/in/gregory-sech-2bba64104" aria-label="Go to Linkedin profile page"><i class="fab fa-linkedin"></i></a></li>
      
    </ul>
    <div class="footer">
      
      <span>Designed by </span><a href="https://www.caicai.me">CaiCai</a>
      <div class="by_zola"><a href="https://www.getzola.org/" target="_blank">Proudly published with Zola!</a></div>
      
    </div>
  </div>
  <div id="main">
    <div class="page-top animated fadeInDown">
      <div class="nav">
        
        
        
        
        <li><a  href="https://gregorysech.github.io/">Home</a></li>
        <li><a  href="https://gregorysech.github.io/about/">About</a></li><li><a  href="https://gregorysech.github.io/tags">Tags</a></li><li><a 
            href="https://gregorysech.github.io/archive/">Archive</a></li></div>
      <div class="information">
        <div class="back_btn">
          <a onclick="window.history.go(-1)" ><i
              class="fas fa-chevron-left"></i></a>
        </div>
        
        
          
        
        
        <div id="language-switch">
          <button onclick="showLanguages()" aria-label="show languages"><i class="fas fa-globe"></i></button>
          <div id="languages" style="display: none">
            
            <a onclick="window.location.href='https:&#x2F;&#x2F;gregorysech.github.io&#x2F;it&#x2F;'"> Italiano </a>
            
          </div>
        </div>
        
        <div class="avatar"><img src="https://gregorysech.github.io/images/avatar.jpg"></div>
      </div>
    </div>
    <div class="autopagerize_page_element">
      <div class="content">
        
<article class="post animated fadeInDown">
  <h1><a href="https:&#x2F;&#x2F;gregorysech.github.io&#x2F;2024-06-12-til&#x2F;">TIL 2024-03-11: Tesseract OCR output formats</a></h1>
  
  <div class="post-content"><p><a href="https://github.com/madmaze/pytesseract">Tesseract</a> allows for various output formats for the analysis. Some are well-known formats like <code>txt</code>, <code>tsv</code> and <code>pdf</code>. Others are specialised in OCR analyses such as &quot;Analyzed Layout and Text Object&quot; (ALTO) and hOCR.
The PAGE format was mentioned on <a href="https://github.com/tesseract-ocr/tesseract/blob/main/doc/tesseract.1.asc">the manual page</a> but Homebrew's Tesseract version doesn't seem equipped with that option.</p>
<h1 id="analyzed-layout-and-text-object-alto">Analyzed Layout and Text Object (ALTO)</h1>
<p><a href="https://academic.oup.com/dsh/article/18/1/77/1047620?login=true">ALTO</a> is based on an XML schema and details metadata about the layout and contents of physical text resources and is an extension of the Metadata Encoding and Transmission Schema for digital libraries. </p>
<p>Its development started during the Metadata Engine Project (2002) due to the need to store metadata about digital library text positioning. At the time, there was no standard for this kind of data.</p>
<p>The file I've got from analysing some pages with Tesseract didn't contain the <code>&lt;Styles&gt;</code> section.
Only the <code>&lt;Description&gt;</code> and <code>&lt;Layout&gt;</code> sections were filled. </p>
<p>In the <code>&lt;Description&gt;</code> section I got some metadata about the source data, the OCR processing, and the analysis results. Nothing too fancy.</p>
<pre data-lang="XML" style="background-color:#2b303b;color:#c0c5ce;" class="language-XML "><code class="language-XML" data-lang="XML"><span>[...]
</span><span>&lt;</span><span style="color:#bf616a;">Description</span><span>&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">MeasurementUnit</span><span>&gt;pixel&lt;/</span><span style="color:#bf616a;">MeasurementUnit</span><span>&gt;
</span><span>
</span><span>	&lt;</span><span style="color:#bf616a;">sourceImageInformation</span><span>&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">fileName</span><span>&gt;data/totally_legally_acquired_document_name/page10.jpg&lt;/</span><span style="color:#bf616a;">fileName</span><span>&gt;
</span><span>	&lt;/</span><span style="color:#bf616a;">sourceImageInformation</span><span>&gt;
</span><span>
</span><span>	&lt;</span><span style="color:#bf616a;">OCRProcessing </span><span style="color:#d08770;">ID</span><span>=&quot;</span><span style="color:#a3be8c;">OCR_0</span><span>&quot;&gt;
</span><span>		&lt;</span><span style="color:#bf616a;">ocrProcessingStep</span><span>&gt;
</span><span>			&lt;</span><span style="color:#bf616a;">processingSoftware</span><span>&gt;
</span><span>				&lt;</span><span style="color:#bf616a;">softwareName</span><span>&gt;tesseract 5.3.4&lt;/</span><span style="color:#bf616a;">softwareName</span><span>&gt;
</span><span>			&lt;/</span><span style="color:#bf616a;">processingSoftware</span><span>&gt;
</span><span>		&lt;/</span><span style="color:#bf616a;">ocrProcessingStep</span><span>&gt;
</span><span>	&lt;/</span><span style="color:#bf616a;">OCRProcessing</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">Description</span><span>&gt;
</span><span>[...]
</span></code></pre>
<p>The <code>&lt;Layout&gt;</code> section contains the text layout metadata as the name suggests.</p>
<h1 id="hocr">hOCR</h1>
<p><a href="https://ieeexplore.ieee.org/document/4377078">hOCR</a> was born due to the necessity of having a single format to represent intermediate and final OCR results.
At its basis, there are the XHTML and CSS formats. The OCR information is added using <code>&lt;div&gt;</code>s and <code>&lt;span&gt;</code>s becoming potentially invisible when a browser renders the result.</p>
<pre data-lang="HTML" style="background-color:#2b303b;color:#c0c5ce;" class="language-HTML "><code class="language-HTML" data-lang="HTML"><span>&lt;?</span><span style="color:#bf616a;">xml </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot; </span><span style="color:#d08770;">encoding</span><span>=&quot;</span><span style="color:#a3be8c;">UTF-8</span><span>&quot;?&gt;
</span><span>&lt;!</span><span style="color:#b48ead;">DOCTYPE </span><span style="color:#d08770;">html </span><span style="color:#b48ead;">PUBLIC </span><span>&quot;</span><span style="color:#a3be8c;">-//W3C//DTD XHTML 1.0 Transitional//EN</span><span>&quot;
</span><span>&quot;</span><span style="color:#a3be8c;">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</span><span>&quot;&gt;
</span><span>
</span><span>&lt;</span><span style="color:#bf616a;">html </span><span style="color:#d08770;">xmlns</span><span>=&quot;</span><span style="color:#a3be8c;">http://www.w3.org/1999/xhtml</span><span>&quot; </span><span style="color:#d08770;">xml:lang</span><span>=&quot;</span><span style="color:#a3be8c;">en</span><span>&quot; </span><span style="color:#d08770;">lang</span><span>=&quot;</span><span style="color:#a3be8c;">en</span><span>&quot;&gt;
</span><span>&lt;</span><span style="color:#bf616a;">head</span><span>&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">title</span><span>&gt;&lt;/</span><span style="color:#bf616a;">title</span><span>&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">meta </span><span style="color:#d08770;">http-equiv</span><span>=&quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot; </span><span style="color:#d08770;">content</span><span>=&quot;</span><span style="color:#a3be8c;">text/html;charset=utf-8</span><span>&quot;/&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">meta </span><span style="color:#d08770;">name</span><span>=&#39;</span><span style="color:#a3be8c;">ocr-system</span><span>&#39; </span><span style="color:#d08770;">content</span><span>=&#39;</span><span style="color:#a3be8c;">tesseract 5.3.4</span><span>&#39; /&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">meta </span><span style="color:#d08770;">name</span><span>=&#39;</span><span style="color:#a3be8c;">ocr-capabilities</span><span>&#39; </span><span style="color:#d08770;">content</span><span>=&#39;</span><span style="color:#a3be8c;">ocr_page ocr_carea ocr_par ocr_line ocrx_word ocrp_wconf</span><span>&#39;/&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">head</span><span>&gt;
</span><span>
</span><span>&lt;</span><span style="color:#bf616a;">body</span><span>&gt;
</span><span>	&lt;</span><span style="color:#bf616a;">div </span><span style="color:#d08770;">class</span><span>=&#39;</span><span style="color:#a3be8c;">ocr_page</span><span>&#39; </span><span style="color:#8fa1b3;">id</span><span>=&#39;</span><span style="color:#a3be8c;">page_1</span><span>&#39; </span><span style="color:#d08770;">title</span><span>=&#39;</span><span style="color:#a3be8c;">image &quot;data/totally_legally_acquired_document_name/page10.jpg&quot;; bbox 0 0 2466 3639; ppageno 0; scan_res 70 70</span><span>&#39;&gt;
</span><span>	[...]
</span><span>	&lt;/</span><span style="color:#bf616a;">div</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">body</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">html</span><span>&gt;
</span></code></pre>
<p>Thanks to its foundations being well-established web technologies, displaying the analysis output is quite painless thanks to projects like <a href="https://github.com/kba/hocrjs">hocrjs</a>.
You can put this tag (<code>&lt;script src=&quot;https://unpkg.com/hocrjs&quot;&gt;&lt;/script&gt;</code>) at the end of the document body and display the file by opening it with a web browser.
Voilà, now the browser will show you the document structure obtained from Tesseract!</p>
<p>Thanks to hocrjs I discovered <a href="https://www.tampermonkey.net/index.php">Tampermonkey</a> however I was unable to get it to work after loading the userscript. </p>
</div>
  <div class="post-footer">
    <div class="meta">
      <div class="info">
        
        <i class="far fa-sun"></i><span class="date">2024-03-11</span>
        
        
        <i class="fas fa-tags"></i>
        
        <a class="tag" href="https://gregorysech.github.io/tags/Tesseract">&nbsp;Tesseract</a>
        
        <a class="tag" href="https://gregorysech.github.io/tags/NLP">&nbsp;NLP</a>
        
        <a class="tag" href="https://gregorysech.github.io/tags/data">&nbsp;data</a>
        
        <a class="tag" href="https://gregorysech.github.io/tags/formats">&nbsp;formats</a>
        
        <a class="tag" href="https://gregorysech.github.io/tags/OCR">&nbsp;OCR</a>
        
        
      </div>
    </div>
  </div>
</article>
<div class="share">
  <div class="weibo">
    <a class="fab fa-weibo"
      href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&title=',e(d.title),'&appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a>
  </div>
  <div class="twitter">
    <a class="fab fa-twitter"
      href="http://twitter.com/share?text=TIL 2024-03-11: Tesseract OCR output formats&url=https:&#x2F;&#x2F;gregorysech.github.io&#x2F;2024-06-12-til&#x2F;&hashtags=Tesseract,NLP,data,formats,OCR"></a>
  </div>
</div>










      </div>
    </div>
  </div>
  
  <script>
    function showLanguages() {
      let currentDisplay = document.getElementById("languages").style.display;
      if (currentDisplay == 'none') {
        document.getElementById("languages").style.display = 'block';
      } else {
        document.getElementById("languages").style.display = 'none';
      }
    }
  </script>
</body>

</html>